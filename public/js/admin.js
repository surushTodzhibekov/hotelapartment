function datesBetween(t,i){for(var a=[],e=new Date(t),n=new Date(i);e<=n;)a.push($.datepicker.formatDate("mm/dd/yy",new Date(e))),e.setDate(e.getDate()+1);return a}var Ajax={get:function(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;$.ajax({cache:!1,url:base_url+"/"+t,type:"GET",data:a,success:function(t){App[i](t)},beforeSend:function(){e&&App[e]()}})},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;$.ajax({cache:!1,url:base_url+"/"+i,type:"GET",dataType:"json",data:t,success:function(t){a&&App[a](t)}})}},App={timestamp:null,idsOfNotShownNotifications:[],GetReservationData:function(t,i,a){App.calendar_id=i,Ajax.get("ajaxGetReservationData?fromWebApp=1","AfterGetReservationData",{room_id:t,date:a},"BeforeGetReservationData")},BeforeGetReservationData:function(){$(".loader_"+App.calendar_id).hide(),$(".hidden_"+App.calendar_id).show()},AfterGetReservationData:function(t){$(".hidden_"+App.calendar_id+" .reservation_data_room_number").html(t.room_number),$(".hidden_"+App.calendar_id+" .reservation_data_day_in").html(t.day_in),$(".hidden_"+App.calendar_id+" .reservation_data_day_out").html(t.day_out),$(".hidden_"+App.calendar_id+" .reservation_data_person").html(t.FullName),$(".hidden_"+App.calendar_id+" .reservation_data_person").attr("href",t.userLink),$(".hidden_"+App.calendar_id+" .reservation_data_delete_reservation").attr("href",t.deleteResLink),t.status?($(".hidden_"+App.calendar_id+" .reservation_data_confirm_reservation").removeAttr("href"),$(".hidden_"+App.calendar_id+" .reservation_data_confirm_reservation").attr("disabled","disabled")):$(".hidden_"+App.calendar_id+" .reservation_data_confirm_reservation").attr("href",t.confirmResLink)},SetReadNotification:function(t){Ajax.set({id:t},"ajaxSetReadNotification?fromWebApp=1")},GetNotShownNotifications:function(){Ajax.get("ajaxGetNotShownNotifications?fromWebApp=1&timestamp="+App.timestamp,"AfterGetNotShownNotifications")},AfterGetNotShownNotifications:function(t){var i=JSON.parse(t);if(App.timestamp=i.timestamp,setTimeout(App.GetNotShownNotifications(),100),!jQuery.isEmptyObject(i.notifications)){$("#app-notifications-count").show(),$("#app-notifications-count").removeClass("hidden");for(var a=0;a<=i.notifications.length-1;a++)App.idsOfNotShownNotifications.push(i.notifications[a].id),$("#app-notifications-count").html(parseInt($("#app-notifications-count").html())+1),$("#app-notifications-list").append('<li class="unread_notification"><a href="'+i.notifications[a].id+'">'+i.notifications[a].content+"</a></li>");App.SetShownNotifications(App.idsOfNotShownNotifications)}},SetShownNotifications:function(t){Ajax.set({idsOfNotShownNotifications:t},"ajaxSetShownNotifications?fromWebApp=1")}};$(document).on("click",".dropdown",function(t){t.stopPropagation()}),$(document).on("click",".unread_notification",function(t){t.preventDefault(),$(this).removeClass("unread_notification");var i=parseInt($("#app-notifications-count").html());i>0&&($("#app-notifications-count").html(i-1),1==i&&$("#app-notifications-count").hide());var a=$(this).children().attr("href");$(this).children().removeAttr("href"),App.SetReadNotification(a)}),$(function(){App.GetNotShownNotifications()});
